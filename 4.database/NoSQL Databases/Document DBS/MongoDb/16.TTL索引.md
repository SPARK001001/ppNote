TTL索引：了解MongoDB的TTL索引（Time-to-Live），用于自动删除过期的文档。

TTL索引（Time-to-Live Index）是MongoDB中的一种特殊索引，用于自动删除具有过期时间的文档。TTL索引允许用户指定一个字段，MongoDB会自动检查该字段的值，并在达到设定的过期时间时将文档删除。

使用TTL索引可以非常方便地管理过期数据，例如日志数据、临时会话等，无需手动执行数据清理操作，MongoDB会自动根据过期时间自动删除相应的文档。

创建TTL索引需要指定一个字段和一个过期时间（以秒为单位）。MongoDB会在后台自动定期扫描集合，并删除那些过期时间早于当前时间的文档。被TTL索引管理的字段通常是存储日期或时间戳的字段。

以下是创建TTL索引的示例：

```javascript
// 在collection_name集合上创建名为expireAfterSeconds的TTL索引，过期时间为3600秒（1小时）
db.collection_name.createIndex({ "expireAt": 1 }, { expireAfterSeconds: 3600 })
```

上述示例中，我们在`collection_name`集合上创建了一个名为`expireAt`的TTL索引，并设置过期时间为3600秒（1小时）。若文档中的`expireAt`字段的值早于当前时间，MongoDB会在后台自动删除该文档。

需要注意的是，TTL索引只能应用于包含日期或时间戳等可排序字段的文档。对于其他类型的字段，TTL索引是不适用的。

使用TTL索引时，需要注意以下几点：

1. TTL索引只能用于单个字段，且该字段的值必须是日期或时间戳类型。
2. MongoDB后台线程定期检查TTL索引，因此并不是实时的删除过期文档，但通常在60秒内会完成过期文档的删除。
3. 如果TTL索引已经创建，但文档中的过期字段不存在或者其值不是日期类型，MongoDB会忽略这些文档。
4. 为了确保TTL索引能正常工作，确保MongoDB实例的系统时间正确设置。

使用TTL索引可以方便地自动管理过期数据，减轻了手动清理过期数据的工作量，是MongoDB中一个实用的特性。