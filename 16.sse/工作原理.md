Server-Sent Events（SSE）的工作原理相对简单，它建立在HTTP协议之上，允许服务器将实时事件流推送到客户端。以下是SSE的工作原理：

1. **建立连接：** 客户端通过使用一个特殊的HTTP请求来建立与服务器的连接。客户端创建一个新的HTTP连接，向服务器发送一个GET请求，并在请求头中指定"Accept: text/event-stream"，表明它希望接收SSE事件流。

2. **服务器响应：** 服务器在收到带有"Accept: text/event-stream"头的HTTP请求后，会对该请求进行处理。服务器返回一个HTTP响应，响应头中包含"Content-Type: text/event-stream"，表示将发送的数据是SSE事件流。

3. **事件流格式：** 服务器通过持续发送事件到响应流中。每个事件以一行文本表示，由以下字段组成：
   - `event`: 事件名称，可选，表示事件的类型。
   - `data`: 事件数据，表示要发送的实际内容。
   - `id`: 事件ID，可选，用于标识事件。
   - `retry`: 重试时间，可选，表示连接断开后重新连接的间隔时间。

4. **数据传输：** 一旦服务器向事件流写入数据，这些数据会立即传输到客户端。客户端通过JavaScript的EventSource API监听连接，一旦接收到事件，它将执行相应的回调函数。

5. **连接保持：** SSE连接是持久性的，这意味着服务器和客户端之间的连接保持打开状态，不会像传统的HTTP请求一样在每次通信后关闭。这种持续的连接允许服务器在有新事件时立即推送数据到客户端。

6. **断线重连：** 如果连接因网络问题中断，客户端会自动尝试重新连接，根据服务器的重试时间设置。这种机制可以确保即使连接中断，客户端也能继续接收实时数据。

总的来说，SSE的工作原理是基于长连接的实时数据推送，允许服务器不断向客户端发送事件，实现了一种简单而有效的实时通信机制。