### 什么是http

- http 是基于tcp/ip 模型的应用层协议，标准化客户端和服务器之间如何通信，它定义了如何在因特网上请求和传输内容。
- http默认80端口，https默认使用443端口

### http 版本发展

- http/0.9: 1991, 第一个记录的版本，没header, 只支持get请求，响应是html格式

- http/1.0: 1996, 

  - 支持请求头，ascall编码

  - 请求方法支持 get post head等

  - 响应内容多格式： 图片，视频文件，文本等

  - 无状态协议： 不保存客户端连接信息，每次请求都要发送冗余的数据

  - 但不支持长连接，每次请求需要三次握手建立tcp连接

    - 三次握手：在共享数据之前发送一些数据包

      - SYN包: 客户端选择一个随机数，假设seq=x发送给客户端

      - SYN ACK包: 服务端收到信息，选择一个随机数，假设seq=y, 和ack=x+1给客户端

      - ACK包: 客户端收到服务端的回复，再发送一个ack=y+1的信息给服务端。

        

- http/1.1: 1999

  - 增加请求方法： PUT， patch, options ,delete
  - 支持长连接：在一个tcp连接上可以发送多个请求和响应，但在任意时刻，只能有一个未完成的请求，引发队头阻塞
  - 支持pipeline: 在同一个连接中，同时发多个请求，不需要等服务端响应了才发。无序响应需要额外处理来对应。
  - 长连接和pipeline需要携带header:content-length这样客户端才知道传输何时结束，才能进行下一个请求(串行传输)或等待下一个响应（开启pipeline）。 但要是数据是动态的，无法提前知道大小此时就没content-length, 产生了chunked 分块传输，最后一个分块content-length设置为0.
  - 支持分块传输：header设置Transfer-Encoding: chunked，对数据分片，最后一个分片为content-length=0,表示传输结束
  - cacheing
  - byte ranges 
  - character sets
  - client cokkieds
  - new  status codes
  - ..and more
  - 

  - 

    

- http/2.0 : 2015, 传输内容低延迟的协议，旨在提升web应用的速度和性能
  - 使用二进制协议，取代1.1的文本协议。减少解析和编码开销
  - 多路复用： 允许在同一个tcp连接上同时发送多个请求和响应。解决了1.1的头部阻塞问题，提高了并发处理能力
  - 头部压缩：使用hpack算法对请求和响应头部压缩，减少头部大小，节省带宽，提高了整体性能
  - 服务器推送：服务器可以在请求之前主动推送相关资源，以加速页面加载速度
  - 流量优先级： 可以对请求设置优先级，确保重要资源优先加载
  - 安全性： 必须使用https实现，增强数据安全性和隐私保护
  - 向后兼容： 可以支持在http1.1的现有基础上运行。
  - HTTP/2的引入使得网页加载速度更快、性能更高效，特别是对于复杂的Web应用和移动设备上的应用有着显著的改进。虽然HTTP/2在技术上有很多优势，但它并不是HTTP/1.1的替代品，而是作为HTTP协议的演进版本，为Web应用提供更好的性能和体验。