### dns是如何工作的？

dns 是将域名转换成ip地址的分布式系统

- 工作过程：
  - 用户输入域名：
  - 本地dns解析：用户计算机查本地dns缓存，有就返回
  - 递归查询： 本地dns缓存没，计算机向本地网络提供的本地dns服务器发起递归查询请求。
  - 迭代查询： 本地dns服务器收到用户请求，向根服务器发起一个迭代查询请求。根dns服务器是全球分布的一组服务器，负责管理顶级域名的解析。
  - 顶级域名查询： 根服务器收到本地dns服务器的请求后，会根据对应的顶级域名服务器（com.net.org等）的ip地址，把这些ip返回给本地dns服务器。
  - 二级域名查询： 本地dns服务器收到根域名服务器返回的ip，向顶级域名服务器发起请求，找到对应的二级域名服务器的ip地址。并把ip返回给本地dns服务器
  - 主机名查询：本地dns服务器向二级域名服务器发起查询请求，找到主机名对应的ip地址，并将该地址返回给计算机
  - 缓存更新： 本地dns服务器收到响应后，会将将结果存储到本地缓存，以便于下次查询可以直接返回，避免重复查询。
- 递归查询  vs 迭代查询
  - 递归查询是： 客户端只需向dns服务器发起一个请求，然后dns完成整个查询请求
  - 迭代查询：客户端需要主动发起多次查询请求