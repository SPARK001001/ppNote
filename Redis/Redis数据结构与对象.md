Redis 底层使用C语言实现

1. 简单动态字符串SDS

   1. Redis只会使用C字符串作为字面量，在大多数情况下，Redis使用SDS作为字符串表示

   2. 相比C字符串，有以下优势。

      ​	`SDS结构`: 

      ​	 int len ;(buf数组中已使用字节数量)

      ​	 int free;（未使用字节数量）

      ​	 char buf[] ;（字节数组，用于保存字符串）

      1. 常数复杂度获取字符串长度（通过len）
      2. 杜绝缓冲区溢出（先判断free，没有足够大小就扩容）
      3. 减少修改字符串长度时所需的`内存重分配`次数（两种优化策略）
         1. 空间预分配（若len小于1M,修改后新字符串长度为13，则分配free为13，len为13，总大小为13+13+1,1保存末尾空字符，以便更好复用c语言的函数库； 若len大于1M比如为30M, 预分配1M, 即 30M +1M +1byte）
         2. 惰性释放空间（将减少的空间记录在free上）
      4. 二进制安全（不对保存在其中的数据做任何限制、过滤，写进去啥样，读出来就是啥样）
      5. 兼容部分C字符串函数